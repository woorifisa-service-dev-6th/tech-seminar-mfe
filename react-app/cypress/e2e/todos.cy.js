
// ê° í…ŒìŠ¤íŠ¸ì¼€ì´ìŠ¤(it)ê°€ ìˆ˜í–‰ë˜ê¸° ì „ì— í•œ ë²ˆì”© ì‹¤í–‰ë˜ëŠ” ì½”ë“œ
beforeEach(() => {
  // í˜ì´ì§€ ì ‘ì†
  cy.visit('http://localhost:5173')
  
})

afterEach(() => {
  console.log('ìì› í•´ì œ ì²˜ë¦¬'); // Cleanup ì²˜ë¦¬
})

describe('í• ì¼ ë“±ë¡ ê¸°ëŠ¥', () => {

  it.skip('í• ì¼ ë“±ë¡ ë²„íŠ¼ì„ í´ë¦­í•  ê²½ìš°, í• ì¼ ë“±ë¡ í¼ Modalì´ í™œì„±í™”ëœë‹¤.', () => {
    // í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¡œì§ ì‘ì„± ë¶€ë¶„
    
    // í• ì¼ ë“±ë¡ ë²„íŠ¼ í´ë¦­í•˜ê¸°
    // cy.get() -> í˜ì´ì§€ ë‚´ íŠ¹ì • ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ê°€ì ¸ì˜¤ê¸°
    cy.get('[data-cy="add-todo-button"]')
      .click();
    // -> í•´ë‹¹ ë²„íŠ¼ì„ ë§ˆìš°ìŠ¤ í´ë¦­í•´ë¼

    // Modal ì°½ì´ ì •ìƒì ìœ¼ë¡œ í™œì„±í™”ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë°©ë²•??
    const expected = 'í• ì¼ ë“±ë¡';

    cy.get('[data-cy="todo-form-title"]')
    .should('have.text', expected)
    // -> í…ŒìŠ¤íŠ¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 
    // it()ì— ì‘ì„±ëœ 'í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ì— ëŒ€í•œ ê²€ì¦ìš© ì½”ë“œ'ê°€ ì‘ì„±ì´ ë˜ì–´ìˆì–´ì•¼ í•¨
    // ex. assert(), expect(), ...
  });

  it('í•  ì¼ì´ ë“±ë¡ë˜ë©´ í•  ì¼ ëª©ë¡ì— ë“±ë¡í•œ ìƒˆë¡œìš´ í•  ì¼ì´ ì¶”ê°€ë˜ì–´ í‘œì‹œëœë‹¤.', () => {
    // í• ì¼ ë“±ë¡ ë²„íŠ¼ í´ë¦­
    cy.get('[data-cy="add-todo-button"]').click();

    // í• ì¼ ì…ë ¥ ë° ë“±ë¡ ì•¡ì…˜ ìˆ˜í–‰
    cy.get('#title').type('ì‹¤ê¸° ë¬¸ì œí’€ê¸°');
    cy.wait(500);
    cy.get('#summary').type('ì‹¤ê¸° í‰ê°€ë¥¼ í†µê³¼í•œë‹¤.. ì œë°œ!!');
    cy.wait(500);

    // í• ì¼ ì¶”ê°€ ë˜ì—ˆëŠ”ì§€ í™•ì¸
    cy.get('[data-cy="process-add-or-update"]').click();
    cy.wait(1000);
    cy.contains('ì‹¤ê¸° ë¬¸ì œí’€ê¸°').should('exist');
  })
})

describe('í• ì¼ í•„í„°ë§ ê¸°ëŠ¥', () => {
    it('TODO í•„í„° ì„ íƒ ì‹œ :ì±…ê°ˆí”¼_íƒ­: ì•„ì´ì½˜ì´ ìˆëŠ” í•­ëª©ë§Œ ë³´ì—¬ì•¼ í•œë‹¤.', () => {
        cy.get('[data-cy="todo-filter"]').select('TODO');
        cy.get('[data-cy="todo-item"]').each(($el) => {
            cy.wrap($el).should('contain.text', 'ğŸ“‘');
        });
    });
    // ê·¸ ì™¸ ë‹¤ë¥¸ ì¹´í…Œê³ ë¦¬ëŠ” ìƒëµ
});

describe('í• ì¼ ì‚­ì œ ê¸°ëŠ¥', () => {
    it('íŠ¹ì • í• ì¼ì˜ íœ´ì§€í†µ ë²„íŠ¼ì„ í´ë¦­í•  ê²½ìš°, ì„ íƒëœ í• ì¼ì´ ì œê±°ëœë‹¤.', () => {
        // ì‚­ì œ ì „: í•´ë‹¹ ì œëª©ì´ ì¡´ì¬í•´ì•¼ í•¨
        cy.contains('[data-cy="todo-item"]', 'ì ì‹¬ ë¨¹ê¸°').should('exist');

        cy.contains('[data-cy="todo-item"]', 'ì ì‹¬ ë¨¹ê¸°')
            .find('[data-cy="recycle-bin"]')
            .click();

        cy.contains('[data-cy="todo-item"]', 'ì ì‹¬ ë¨¹ê¸°').should('not.exist');
    })
});